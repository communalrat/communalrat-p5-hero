<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <script src="https://cdn.jsdelivr.net/npm/p5@1.9.0/lib/p5.min.js"></script>
  <style>
    body {
      margin: 0;
      background: transparent;
      overflow-x: hidden;
    }
    canvas {
      display: block;
    }
  </style>
</head>
<body>
<script>
let structureText = "structure";
let structureY = [];
let baseY = 150;

let stuffText = "and the stuff in between";
let noiseOffsets = [];
let spacingStart = 250;

let scrollVal = 0;

function setup() {
  createCanvas(windowWidth, 400);
  textFont('Gothic A1');
  textSize(48);
  fill(255);
  noStroke();

  for (let i = 0; i < structureText.length; i++) {
    structureY.push(0);
  }

  for (let i = 0; i < stuffText.length; i++) {
    noiseOffsets.push(random(10));
  }
}

function draw() {
  clear();
  scrollVal = window.scrollY;

  // structure wave animation
  let x = 50;
  for (let i = 0; i < structureText.length; i++) {
    let wave = sin((frameCount + i * 10 + scrollVal * 0.2) * 0.05) * 20;
    structureY[i] = baseY + wave;
    text(structureText.charAt(i), x, structureY[i]);
    x += textWidth(structureText.charAt(i)) + 4;
  }

  // stuff in between - noisy spaced reveal
  let x2 = spacingStart;
  for (let i = 0; i < stuffText.length; i++) {
    let delayFactor = i * 50;
    let noiseOffset = map(noise(noiseOffsets[i] + frameCount * 0.01), 0, 1, -10, 10);
    if (scrollVal > 100) {
      text(stuffText.charAt(i), x2 + noiseOffset, 250);
    }
    x2 += textWidth(stuffText.charAt(i)) + 2;
  }
}

function windowResized() {
  resizeCanvas(windowWidth, 400);
}
</script>
</body>
</html>
